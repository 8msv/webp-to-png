<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebP to PNG Converter</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React and ReactDOM via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- React Spring via CDN -->
  <script src="https://unpkg.com/@react-spring/web/dist/react-spring.web.cjs.js"></script>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500">
  <div id="root" class="bg-white p-8 rounded-2xl shadow-lg w-full max-w-md text-center space-y-6"></div>

  <script type="text/babel">
    const { useState } = React;
    const { useSpring, animated } = ReactSpring;

    function App() {
      const [file, setFile] = useState(null);
      const [pngUrl, setPngUrl] = useState(null);

      // Animation for the upload button
      const uploadButtonAnimation = useSpring({
        from: { opacity: 0, transform: 'translateY(-20px)' },
        to: { opacity: 1, transform: 'translateY(0)' },
        config: { tension: 200, friction: 20 },
      });

      // Animation for the result section
      const resultAnimation = useSpring({
        from: { opacity: 0, transform: 'scale(0.9)' },
        to: { opacity: pngUrl ? 1 : 0, transform: pngUrl ? 'scale(1)' : 'scale(0.9)' },
        config: { tension: 200, friction: 20 },
      });

      const handleFileUpload = (event) => {
        const uploadedFile = event.target.files[0];
        if (uploadedFile && uploadedFile.type.includes('image/webp')) {
          setFile(uploadedFile);
        } else {
          alert('Please upload a valid WebP file.');
        }
      };

      const convertWebPtoPNG = () => {
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (event) => {
          const img = new Image();
          img.src = event.target.result;

          img.onload = () => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = img.width;
            canvas.height = img.height;

            ctx.drawImage(img, 0, 0);

            // Convert the canvas image to PNG
            const pngDataUrl = canvas.toDataURL('image/png');
            setPngUrl(pngDataUrl);
          };
        };

        reader.readAsDataURL(file);
      };

      return (
        <div className="space-y-6">
          <h1 className="text-3xl font-bold text-gray-800">WebP to PNG Converter</h1>

          {/* File Input */}
          <animated.div style={uploadButtonAnimation}>
            <input
              type="file"
              accept=".webp"
              onChange={handleFileUpload}
              className="w-full px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-400 transition-colors"
            />
          </animated.div>

          {/* Convert Button */}
          <animated.button
            onClick={convertWebPtoPNG}
            disabled={!file}
            className={`px-6 py-2 rounded-lg font-medium text-white ${
              file ? 'bg-indigo-600 hover:bg-indigo-700' : 'bg-gray-400 cursor-not-allowed'
            } transition-colors`}
          >
            Convert to PNG
          </animated.button>

          {/* Result Section */}
          <animated.div style={resultAnimation} className="space-y-4">
            {pngUrl && (
              <>
                <p className="text-green-600 font-semibold">Conversion Successful!</p>
                <a
                  href={pngUrl}
                  download={file?.name.replace('.webp', '.png')}
                  className="inline-block px-6 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors"
                >
                  Download PNG
                </a>
              </>
            )}
          </animated.div>
        </div>
      );
    }

    // Render the React app
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>

  <!-- Babel for JSX support -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
